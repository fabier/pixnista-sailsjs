<div class="container-fluid">
    <!-- Creates the navbar -->
    <nav class="navbar navbar-default navbar-inverse">
        <!-- This creates the mechanism for collapse button -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed">
            <!-- This controls the number of lines in the image when the nav collapse -->
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>

        <!-- This is the brand on the left-hand side. -->
        <a class="navbar-brand" href="/#">Pixnista</a>
        <% if (typeof user !== 'undefined') { %>
        <!-- This is what is the above collapse button points to when the mark-up below is collapsed -->
        <div class="collapse navbar-collapse" ng-class="!navCollapsed && 'in'">
            <!-- This is what "styles" the li's as navbar items -->
            <ul class="navbar-form navbar-right">
                <!-- navbar-right pulls this element right -->
                <!-- Using ng-show instead of ng-if because we need this mark-up to be in the dom when signup controller
                fires.  If it's not there (which it wouldn't be in the case of ng-if) then the scope of the signup
                controller will not be tied to this element. -->
                <li class="li-no-style">
                    <img class="header-useravatar" src="<%= user.gravatarUrl %>"/>
                    <span class="header-username"><%= user.name %></span>
                    <a href="/logout" class="btn btn-warning">Se d√©connecter</a>
                </li>
                <!-- <a ng-controller="signinController" class="btn btn-default navbar-btn navbar-right" href="#" ng-if="!isAuthenticated">sign-in</a> -->
                <!-- Using ng-show instead of ng-if because we need this mark-up to be in the dom when signup controller
                fires.  If it's not there (which it wouldn't be in the case of ng-if) then the scope of the signup
                controller will not be tied to this element. -->
            </ul>
        </div>
        <% } else { %>
        <div class="collapse navbar-collapse" ng-class="!navCollapsed && 'in'">
            <form ng-submit="submitLoginForm()" class="navbar-form navbar-right">

                <div class="form-group">
                    <input ng-model="loginForm.email"
                           ng-show="!loginForm.loading"
                           type="text" placeholder="Email" name="email" class="form-control">
                </div>
                <div class="form-group">
                    <input ng-model="loginForm.password"
                           ng-show="!loginForm.loading"
                           type="password" placeholder="Password" name="password" class="form-control">
                </div>
                <button type="submit" class="btn btn-success">
                    <span ng-show="!loginForm.loading">Sign in</span>
                    <span ng-show="loginForm.loading" class="fa fa-spinner"></span>
                    <span ng-show="loginForm.loading">Signing in...</span>
                </button>
                <input type="hidden" name="_csrf" value="<%= _csrf %>" />
            </form>
        </div>
        <% } %>
    </nav>
</div>
